<!DOCTYPE html>
<html>
<head>
    <title>Resume Analysis Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background: linear-gradient(to right, #141e30, #243b55);
            color: white;
        }

        .card {
            border-radius: 20px;
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="card shadow-lg p-4 bg-dark">

        <h2 class="text-center mb-4">üöÄ Resume Analysis for {{ role }}</h2>

        <h5>Match Percentage: {{ percentage }}%</h5>

        <div class="progress mb-4" style="height: 25px;">
            <div id="progressBar"
                 class="progress-bar bg-success"
                 role="progressbar"
                 style="width: 0%;">
                {{ percentage }}%
            </div>
        </div>

        <h5>Status: <span class="badge bg-info">{{ level }}</span></h5>

        <hr class="bg-light">

        <div class="row mt-4">
            <div class="col-md-6">
                <h5 class="text-success">‚úÖ Matched Skills</h5>
                {% for skill in found %}
                    <span class="badge bg-success m-1 p-2">{{ skill }}</span>
                {% endfor %}
            </div>

            <div class="col-md-6">
                <h5 class="text-danger">‚ùå Missing Skills</h5>
                {% for skill in missing %}
                    <span class="badge bg-danger m-1 p-2">{{ skill }}</span>
                {% endfor %}
            </div>
        </div>

       <div class="mt-5">
    <canvas id="skillChart"></canvas>
</div>

<hr class="bg-light mt-5">

<h4>üìÑ Resume Preview (Highlighted Skills)</h4>
<div style="background:white;color:black;padding:15px;border-radius:10px;max-height:300px;overflow:auto;">
    {{ highlighted_text | safe }}
</div>

<div class="text-center mt-4">
    <a href="/" class="btn btn-light">Analyze Another Resume</a>
</div>
</div>

<script>
    let percentage = {{ percentage }};
    let progressBar = document.getElementById("progressBar");
    let width = 0;

    let interval = setInterval(() => {
        if (width >= percentage) {
            clearInterval(interval);
        } else {
            width++;
            progressBar.style.width = width + "%";
        }
    }, 10);

    const labels = {{ skill_strength.keys() | list | tojson }};
    const dataValues = {{ skill_strength.values() | list | tojson }};

    const ctx = document.getElementById('skillChart');

    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Skill Proficiency',
                data: dataValues,
                backgroundColor: 'rgba(40, 167, 69, 0.2)',
                borderColor: '#28a745',
                pointBackgroundColor: '#28a745'
            }]
        },
        options: {
            scales: {
                r: {
                    angleLines: { color: "white" },
                    grid: { color: "gray" },
                    pointLabels: { color: "white" },
                    ticks: {
                        backdropColor: "transparent",
                        color: "white"
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: "white"
                    }
                }
            }
        }
    });
</script>

</body>
</html>
  

            

